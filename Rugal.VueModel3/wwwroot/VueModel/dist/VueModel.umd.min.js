(function(n){if(typeof module=="object"&&typeof module.exports=="object"){var t=n(require,exports);t!==undefined&&(module.exports=t)}else typeof define=="function"&&define.amd&&define(["require","exports","vue"],n)})(function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VueStore=t.ApiStore=t.FuncBase=t.VueModel=t.Model=t.Queryer=t.DomQueryer=void 0;class u{$NavigateToFunc;$DefaultDateJoinChar;constructor(){this.$NavigateToFunc=null;this.WithDateTextJoinChar("-")}WithNavigateTo(n){return this.$NavigateToFunc=n,this}WithDateTextJoinChar(n){return this.$DefaultDateJoinChar=n,this}GenerateId(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let t=crypto.getRandomValues(new Uint8Array(1))[0]&15,i=n==="x"?t:t&3|8;return i.toString(16)})}GenerateIdReplace(n){return this.GenerateId().replaceAll("-",n)}NavigateToRoot(){return this.$BaseNavigateTo("/"),this}NavigateTo(n,t=null){n=this.Paths(n);(n==null||n.length==0||n[0].length==0)&&this.$Throw("Url can not be null or empty");n=n.map(n=>n.replace(/\/+$/g,"").replace(/^\/+/g,"/"));let i=this.ToJoin(n,"/");return t!=null&&(t=this.ConvertTo_UrlQuery(t),i+=`?${t}`),this.$BaseNavigateTo(i),this}$BaseNavigateTo(n){this.$NavigateToFunc?this.$NavigateToFunc(n):window.location.href=n}ForEachObject(n,t){for(let i of Object.getOwnPropertyNames(n))if(!i.match(/^$/g)){let r=n[i];t!=null&&t.call(this,i,r)}}DeepObjectExtend(n,t,i=10){if(i==0)return{...n,...t};let r=Object.keys(t);for(let u=0;u<r.length;u++){let f=r[u];if(f in n)if(typeof t[f]!="object")n[f]=t[f];else{let r={...this.DeepObjectExtend(n[f],t[f],i-1)};n[f]=r}else n[f]=t[f]}return n}ToDateInfo(n){n??=new Date;return this.$CreateDateInfo(n)}ToDateText(n,t){n=this.$CreateDateInfo(n);t??={};typeof t=="string"&&(t={Format:t});t.DateJoinChar??=this.$DefaultDateJoinChar;t.Format??=`yyyy${t.DateJoinChar}MM${t.DateJoinChar}dd`;let i=t.Format;return i=i.replaceAll("yyyy",n.Year.toString().padStart(4,"0")),i=i.replaceAll("MM",n.Month.toString().padStart(2,"0")),i=i.replaceAll("dd",n.Day.toString().padStart(2,"0")),t.Format=i,i}ToDateTimeText(n,t){t??={};typeof t=="string"&&(t={Format:t});t.DateJoinChar??=this.$DefaultDateJoinChar;t.Format??=`yyyy${t.DateJoinChar}MM${t.DateJoinChar}dd HH:mm:ss`;t={...t};n=this.$CreateDateInfo(n);this.ToDateText(n,t);let i=t.Format;return i=i.replaceAll("HH",n.Hour.toString().padStart(2,"0")),i=i.replaceAll("mm",n.Minute.toString().padStart(2,"0")),i.replaceAll("ss",n.Second.toString().padStart(2,"0"))}$CreateDateInfo(n){if(n??=new Date,typeof n=="string"&&(n=new Date(n)),n instanceof Date==!1)return n;return{Date:n,Year:n.getFullYear(),Month:n.getMonth()+1,Day:n.getDate(),Hour:n.getHours(),Minute:n.getMinutes(),Second:n.getSeconds()}}ConvertTo_UrlQuery(n){if(typeof n=="string")return n;let t=[];this.ForEachObject(n,(n,i)=>{t.push(`${n}=${i}`)});return t.join("&")}ClearUrl(n){return n.replace(/^\/+|\/+$/g,"")}ToJoin(n,t="."){let i=this.Paths(n);return i.join(t)}Paths(...n){if(!Array.isArray(n))return[n];let t=[];for(let i of n)if(i!=null){if(!Array.isArray(i)){t.push(i);continue}i.length!=0&&t.push(...this.Paths(...i))}return t}$Throw(n){throw new Error(n);}$Error(n){console.error(n)}}t.FuncBase=u;class e extends u{Dom;DomName=null;Parent=null;Children=[];ElementDeep=0;NodeDeep=0;constructor(n){super();this.Dom=n}Query(n){return this.$RCS_QueryChildren(this,n)}Selector(n){return this.Dom.querySelector(n)}SelectorAll(n){return this.Dom.querySelectorAll(n)}$RCS_QueryChildren(n,t){if(t==null)return null;t=this.Paths(t);t.length==1&&(t=t[0]);for(let i of n.Children){if(Array.isArray(t)){let n=[...t],r=n.shift();if(i.DomName==r){n.length==1&&(n=n[0]);let t=this.$RCS_QueryChildren(i,n);if(t!=null)return t}}else if(i.DomName==t)return i;let n=this.$RCS_QueryChildren(i,t);if(n!=null)return n}return null}}class o{$Root=null;$RootNode=null;$Nodes=[];$QueryDomName=null;IsInited=false;WithRoot(n){return this.$Root=document.querySelector(n),this}WithDomName(n){return this.$QueryDomName=n,this}Init(n=false){return this.IsInited&&!n?this:(this.$Root??=document.body,this.$RootNode=new e(this.$Root),this.$RCS_Visit(this.$Root,this.$RootNode,0),this.$Nodes=this.$Nodes.sort((n,t)=>n.NodeDeep-t.NodeDeep),this.IsInited=!0,this)}Query(n,t){return t??=this.$RootNode,t.Query(n)}Using(n,t,i){i??=this.$RootNode;let r=i.Query(n);return r!=null&&t({QueryNode:r,Dom:r.Dom}),this}$RCS_Visit(n,t,i){let u=this.$AddNode(n,t,i);u??=t;let r=n.children;if(n instanceof HTMLTemplateElement&&(r=n.content.children),r!=null&&r.length!=0)for(let n=0;n<r.length;n++){let t=r[n];t instanceof HTMLElement&&this.$RCS_Visit(t,u,i+1)}}$AddNode(n,t,i){if(this.$QueryDomName!=null&&!n.matches(`[${this.$QueryDomName}]`))return null;let u=n.getAttribute(this.$QueryDomName),r=new e(n);return r.DomName=u,r.ElementDeep=i,this.$Nodes.push(r),t!=null&&(r.Parent=t,r.NodeDeep=t.NodeDeep+1,t.Children.push(r)),r}}t.DomQueryer=o;var r=new o;t.Queryer=r;class f{FileId;File;Base64;Buffer;ConvertType;constructor(n,t,i="none"){this.FileId=n;this.File=t;this.ConvertType=i;this.$ConvertFile()}$ConvertFile(){if(this.ConvertType!=null){let n=[];n=Array.isArray(this.ConvertType)?this.ConvertType:[this.ConvertType];for(let t=0;t<n.length;t++){let i=n[t];switch(i){case"base64":this.$ConvertBase64();break;case"buffer":this.$ConvertBuffer()}}}}$ConvertBase64(n=false){if(this.File==null||this.Base64!=null&&n==!1)return this;let t=new FileReader;return t.readAsDataURL(this.File),t.onload=()=>this.Base64=t.result,this}$ConvertBuffer(){let n=new FileReader;n.readAsArrayBuffer(this.File);n.onload=()=>this.Buffer=n.result}}class s extends u{#ApiDomain=null;#RootRoute=null;#AccessToken=null;#RefreshToken=null;#HeaderFuncs=[];#OnEventFunc={};#OnEventName={ApiStore:{AddApi:"AddApi",UpdateStore:"UpdateStore",AddStore:"AddStore",SetStore:"SetStore"}};#OnSuccess;#OnError;#OnComplete;#Store={FileStore:{}};#Func_ConvertTo_FormData=[];$ApiStore={};constructor(){super();this.UseFormJsonBody()}get ApiDomain(){return this.#ApiDomain==null?null:this.ClearUrl(this.#ApiDomain)}set ApiDomain(n){this.#ApiDomain=this.ClearUrl(n)}get OnEventName(){return this.#OnEventName}get #EventName(){return this.OnEventName.ApiStore}get Store(){return this.#Store}set Store(n){this.#Store=n}get FileStore(){return this.Store.FileStore}WithAccessToken(n){return this.#AccessToken=n,this}WithRefreshToken(n){return this.#RefreshToken=n,this}WithApiDomain(n){return this.ApiDomain=n,this}WithRootRoute(n){return this.#RootRoute=n,this}WithHeader(n){return this.#HeaderFuncs.push(n),this}WithOnSuccess(n){return this.#OnSuccess=n,this}WithOnError(n){return this.#OnError=n,this}WithOnComplete(n){return this.#OnComplete=n,this}WithConvertTo_FormParam(n){return this.#Func_ConvertTo_FormData.push(n),this}ClearConvertTo_FormParam(){return this.#Func_ConvertTo_FormData=[],this}AddApi(n){for(let t in n){let r=n[t],i={ApiKey:t,...r};this.$ApiStore[t]=i;this.$EventTrigger(this.#EventName.AddApi,i)}return this}ApiCall(n,t=null){return this.$BaseApiCall(n,t,!1),this}ApiCall_Form(n,t=null){return this.$BaseApiCall(n,t,!0),this}$BaseApiCall(n,t,i){let r=this.$ApiStore[n];r==null&&this.$Throw(`Api setting not found of "${n}"`);let u=t?.Query??r.Query,f=t?.Body??r.Body,e=t?.File??r.File;typeof u=="function"&&(u=u());typeof f=="function"&&(f=f());typeof e=="function"&&(e=e());let s=t?.IsUpdateStore??r.IsUpdateStore??!0,h=this.$ConvertTo_ApiDomainUrl(r.Url,u),o=this.$GenerateFetchRequest(r,f,e,i);r.OnCalling?.call(this,o);t?.OnCalling?.call(this,o);fetch(h,o).then(async n=>{if(!n.ok)throw n;let i=await this.$ProcessApiReturn(n);if(s){let n=r.ApiKey;this.UpdateStore(n,i)}return r.OnSuccess?.call(this,i,n),t?.OnSuccess?.call(this,i,n),this.#OnSuccess(i,n),{ConvertResult:i,ApiResponse:n}}).catch(n=>{this.$Error(n.message),r.OnError?.call(this,n),t?.OnError?.call(this,n),this.#OnError?.call(this,n)}).then(n=>{n instanceof Object?(r.OnComplete?.call(this,n.ConvertResult,n.ApiResponse),t?.OnComplete?.call(this,n.ConvertResult,n.ApiResponse),this.#OnComplete?.call(this,n.ConvertResult,n.ApiResponse)):(r.OnComplete?.call(this),t?.OnComplete?.call(this),this.#OnComplete?.call(this,null,null))})}$GenerateFetchRequest(n,t,i,r){let u=new Headers;if(u.set("Authorization",`Bearer ${this.#AccessToken}`),this.#HeaderFuncs.length>0)for(let n of this.#HeaderFuncs)n(u);let f={method:n.Method,headers:u};if(r){let n=this.$ConvertTo_FormData(t,new FormData);n=this.$ConvertTo_FormFile(i,n);f.body=n;f.method="POST"}else u.set("content-type","application/json"),n.Method=="POST"&&(f.body=JSON.stringify(t??{}));return f}UseFormJsonBody(n="Body"){return this.WithConvertTo_FormParam(t=>{let i={};return i[n]=JSON.stringify(t),i}),this}EventAdd_AddApi(n){return this.$EventAdd(this.#EventName.AddApi,n),this}EventAdd_UpdateStore(n){return this.$EventAdd(this.#EventName.UpdateStore,n),this}EventAdd_AddStore(n){return this.$EventAdd(this.#EventName.AddStore,n),this}EventAdd_SetStore(n){return this.$EventAdd(this.#EventName.SetStore,n),this}$EventAdd(n,t){n in this.#OnEventFunc==!1&&(this.#OnEventFunc[n]=[]);this.#OnEventFunc[n].push(t)}$EventTrigger(n,t){let i=this.#OnEventFunc[n];if(i!=null)for(let n of i)n(t)}UpdateStore(n,t){return n=this.ToJoin(n),this.$RCS_SetStore(n,t,this.Store,{IsDeepSet:!0}),this.$EventTrigger(this.#EventName.UpdateStore,{Path:n,Data:t}),this}AddStore(n,t=null){return(n=this.ToJoin(n),this.GetStore(n)!=null)?this:(this.$RCS_SetStore(n,t,this.Store,{IsDeepSet:!0}),this.$EventTrigger(this.#EventName.AddStore,{Path:n,Data:t}),this)}SetStore(n,t){return n=this.ToJoin(n),this.$RCS_SetStore(n,t,this.Store,{IsDeepSet:!1}),this.$EventTrigger(this.#EventName.SetStore,{Path:n,Data:t}),this}GetStore(n,t){typeof t=="boolean"&&(t={Clone:t});t??={};t.Clone??=!1;t.CreateIfNull??=!1;t.DefaultValue??={};n=this.ToJoin(n);let i=this.$RCS_GetStore(n,this.Store,{CreateIfNull:t.CreateIfNull,DefaultValue:t.DefaultValue});if(t.Clone){let n={},t=Object.getOwnPropertyNames(i);for(let r of t)r.match(/^\$/g)||(n[r]=i[r]);return n}return i}ClearStore(n){let t=this.GetStore(n),i=Object.getOwnPropertyNames(t);for(let n of i)if(!n.match(/^\$/g)){let i=t[n];if(typeof i!="function"){if(Array.isArray(i)){i.splice(0,i.length);continue}t[n]=null}}return this}$RCS_GetStore(n,t,i){if(t==null)return null;let r=n.split("."),u=r.shift();t[u]==null&&i.CreateIfNull&&(t[u]=Array.isArray(i.DefaultValue)?[...i.DefaultValue]:typeof i.DefaultValue=="object"?{...i.DefaultValue}:i.DefaultValue);let f=t[u];if(r.length==0)return f;let e=r.join(".");return this.$RCS_GetStore(e,f,i)}$RCS_SetStore(n,t,i,r={IsDeepSet:true}){if(n.includes(".")){let f=n.split("."),u=f.shift();i[u]==null&&(i[u]={});let e=i[u],o=f.join(".");return this.$RCS_SetStore(o,t,e,r)}let u=!r.IsDeepSet||i[n]==null||t==null||typeof t!="object";return u?(i[n]=t,t):(this.$DeepSetObject(n,t,i),t)}$DeepSetObject(n,t,i){if(t==null){i[n]=t;return}if(!Array.isArray(t)){this.ForEachObject(t,(t,r)=>{if(Array.isArray(r)||typeof r=="object"){this.$DeepSetObject(t,r,i[n]);return}i[n]==null&&(i[n]={});i[n][t]=r});return}Array.isArray(i[n])||(i[n]=[]);i[n].length>0&&i[n].splice(0,i[n].length);i[n].push(...t)}AddFileStore(n){return this.FileStore[n]==null&&(this.FileStore[n]=[]),this}Files(n,t=null){let i=this.FileStore[n];if(i==null)return[];t!=null&&(i=i.filter(n=>t(n)));return i.map(n=>n.File)}AddFile(n,t,i="none"){this.AddFileStore(n);let r=this.FileStore[n];if(Array.isArray(t))t.forEach(t=>this.AddFile(n,t));else if(t instanceof f)r.push(t);else{let n=new f(this.GenerateId(),t,i);r.push(n)}return this}RemoveFile(n,t){let i=this.FileStore[n];if(i==null)return this;if(Array.isArray(t))t.forEach(t=>this.RemoveFile(n,t));else{let n=i.findIndex(n=>n.FileId==t);n>=0&&i.splice(n,1)}return this}ClearFile(n){let t=this.FileStore[n];return t==null?this:(t.splice(0,t.length),this)}$ProcessApiReturn(n){let t=n.headers.get("content-type");return t&&t.includes("application/json")?n.json().then(n=>n):n.text().then(n=>n)}NavigateToRoot(){let n=this.#RootRoute??"/";return super.$BaseNavigateTo(n),this}$ConvertTo_ApiDomainUrl(n,t=null){let i=n;return this.ApiDomain==null||i.includes("http")||(i=`${this.ApiDomain}/${this.ClearUrl(i)}`),t!=null&&(i=`${i}?${this.ConvertTo_UrlQuery(t)}`),i}$ConvertTo_FormData(n,t){return(t??=new FormData,n==null)?t:(this.#Func_ConvertTo_FormData.forEach(i=>{n=i(n,t)}),n instanceof FormData)?n:(this.ForEachObject(n,(n,i)=>{t.append(n,i)}),t)}$ConvertTo_FormFile(n,t){if(t??=new FormData,n==null)return t;if(Array.isArray(n)||n instanceof File||n instanceof f)return this.$AppendFileToFormData("Files",t,n),t;let i=Object.keys(n);for(let r=0;r<i.length;r++){let u=i[r],f=n[u];this.$AppendFileToFormData(u,t,f)}return t}$AppendFileToFormData(n,t,i){if(Array.isArray(i))for(let r=0;r<i.length;r++)this.$AppendFileToFormData(n,t,i[r]);else i instanceof File?t.append(n,i):t.append(n,i.File);return t}}t.ApiStore=s;const h=n("vue");class c extends s{$VueProxy=null;$VueOption={methods:{},components:{},watch:{},computed:{}};$VueApp=null;$VueUse=[];$MountedFuncs=[];constructor(){super();this.#Setup()}#Setup(){this.EventAdd_AddApi(n=>{this.AddStore(n.ApiKey)}).EventAdd_UpdateStore(()=>{this.ForceUpdate()}).EventAdd_AddStore(()=>{this.ForceUpdate()}).EventAdd_SetStore(()=>{this.ForceUpdate()})}get Store(){return this.$VueProxy!=null?this.$VueProxy:super.Store}set Store(n){super.Store=n}WithVueOption(n={}){return this.$VueOption=this.DeepObjectExtend(this.$VueOption,n),this}WithMounted(n=()=>{}){return this.$MountedFuncs.push(n),this}WithComponent(n={}){return this.$VueOption.components=this.DeepObjectExtend(this.$VueOption.components,n),this}WithVueUse(...n){for(let t of n)this.$VueUse.push(t);return this}ForceUpdate(){return this.$VueProxy?.$forceUpdate(),this}Refs(n){return this.$VueProxy?this.$VueProxy[n]:null}}t.VueStore=c;class a extends c{$IsInited=false;$QueryDomName=null;WithQueryAttribute(n){return this.$QueryDomName=n,this}AddV_Text(n,t){let r=this.$ConvertCommandOption(n,t);return typeof r.Target!="function"&&i.AddStore(r.Target),this.$AddCommand(n,"v-text",r),this}AddV_Model(n,t,i){let r=this.$ConvertCommandOption(t);return i??={},i.DefaultValue??=null,r.CommandKey=i.ModelValue,this.AddStore(t,i.DefaultValue),this.$AddCommand(n,"v-model",r),this}AddV_Slot(n,t,i){let r=this.$ConvertCommandOption(i);return r.CommandKey=t,this.$AddCommand(n,`v-slot`,r),this}AddV_For(n,t,i){let r=this.$ConvertCommandOption(n,t);return i&&(i=this.ToJoin(i),r.TargetHead=`(${i}) in `),r.TargetHead??="(item, index) in ",this.$AddCommand(n,"v-for",r),this}AddV_If(n,t){let i=this.$ConvertCommandOption(n,t);return this.$AddCommand(n,"v-if",i),this}AddV_Show(n,t){let i=this.$ConvertCommandOption(n,t);return this.$AddCommand(n,"v-show",i),this}AddV_Bind(n,t,i){let r=this.$ConvertCommandOption(n,i);return r.CommandKey=t,this.$AddCommand(n,"v-bind",r),this}AddV_On(n,t,i){let r=this.$ConvertCommandOption(n,i);return r.FuncAction=!1,r.CommandKey=t,this.$AddCommand(n,`v-on`,r),this}AddV_OnChange(n,t){return this.AddV_On(n,"change",t),this}AddV_Click(n,t,i){let r=this.$ConvertCommandOption(n,t);return i&&(r.FuncArgs=i),this.AddV_On(n,"click",r),this}AddV_Function(n,t){return this.$IsInited&&!Array.isArray(n)?this.$VueOption.methods[n]=t:i.UpdateStore(n,t),this}AddV_Watch(n,t,i=false,r={}){let u={handler:t,deep:i,...r};return this.$VueOption.watch[this.ToJoin(n)]=u,this}AddV_FilePicker(n,t){let i=null,r=null,f="none",u=!1;return typeof t=="string"?i=t:(i=t.StorePath,f=t.ConvertType,u=t.Multiple,r=Array.isArray(t.Accept)?t.Accept.join(" "):t.Accept),this.AddFileStore(i),this.AddV_Click(n,()=>{let n=document.createElement("input");n.type="file";r!=null&&(n.accept=r);u!=null&&(n.multiple=u);n.onchange=()=>{if(n.files!=null&&n.files.length!=0){let t=n.files;for(let n=0;n<t.length;n++){let r=t[n];this.AddFile(i,r,f)}}};n.click()}),this}AddV_Tree(n,t){let r=[],u=this.Paths(n),e=Object.keys(t);this.$ParseTreeSet(u,t,r);let f={"v-text":n=>{i.AddV_Text(n.Paths,n.StoreValue)},"v-model":n=>{if(typeof n.StoreValue=="function"){i.$Error(`v-model command value must be a string or string[], path: ${this.ToJoin(n.Paths)}`);return}i.AddV_Model(n.Paths,n.StoreValue,{ModelValue:n.CommandKey})},"v-for":n=>{i.AddV_For(n.Paths,n.StoreValue,n.CommandKey)},"v-if":n=>{i.AddV_If(n.Paths,n.StoreValue)},"v-show":n=>{i.AddV_Show(n.Paths,n.StoreValue)},"v-bind":n=>{i.AddV_Bind(n.Paths,n.CommandKey,n.StoreValue)},"v-on":n=>{i.AddV_On(n.Paths,n.CommandKey,n.StoreValue)},"v-slot":n=>{if(Array.isArray(n.StoreValue)||typeof n.StoreValue=="function"){i.$Error(`v-slot command value must be a string, path: ${this.ToJoin(n.Paths)}`);return}i.AddV_Slot(n.Paths,n.CommandKey,n.StoreValue)},watch:n=>{if(typeof n.StoreValue!="function"){i.$Error(`watch command value must be a function, path: ${this.ToJoin(n.Paths)}`);return}i.AddV_Watch(n.Paths,n.StoreValue)},func:n=>{if(typeof n.StoreValue!="function"){i.$Error(`func command value must be a function, path: ${this.ToJoin(n.Paths)}`);return}i.AddV_Function(["event",...n.Paths,n.CommandKey],n.StoreValue)}};for(let n of r){let t=f[n.Command];if(t==null){i.$Error(`${n.Command} command is not allowed, path: ${this.ToJoin(n.Paths)}`);continue}t(n)}return this}$ParseTreeSet(n,t,r){let u=Object.keys(t);for(let f=0;f<u.length;f++){let e=u[f],o=t[e];if(!e.includes(":")){r.push({Command:e,StoreValue:o=="."?[...n]:o,Paths:[...n]});continue}let s=e.split(":");if(e.length<2){i.$Error(`command ${e} invalid`);continue}e=s.shift();let h=i.ToJoin(s,":");if(e!=""){r.push({Command:e,CommandKey:h,StoreValue:o,Paths:[...n]});continue}let c=h;this.$ParseTreeSet([...n,c],o,r)}}AddV_Property(n,t){let i=this.Store;n=this.ToJoin(n);let r=n;if(n.includes(".")){let t=n.split(".");r=t.pop();let u=t.join(".");i=this.GetStore(u,{CreateIfNull:!0,DefaultValue:{}})}let u=this.$BaseAddProperty(i,r,t);if(t.Bind){Array.isArray(t.Bind)||(t.Bind=[t.Bind]);for(let i of t.Bind)this.AddV_Property(i,{Target:n});u.Bind=t.Bind}return this}$BaseAddProperty(n,t,i){let f=this,u={get(){return i.get?i.get():this.$get(t)},set(n){if(i.set){i.set(n);return}this.$set(t,n)}};i.get&&(u.get=i.get);i.set!=null&&(u.set=i.set);let r=Object.defineProperty(n,t,u);return r.$properties??={},r.$properties[t]={...i},r.$get??=n=>{let t=r.$properties[n];return t?.Target==null?t[`$${n}`]:f.GetStore(t.Target)},r.$set??=(n,t)=>{let i=r.$properties[n];i?.Target?f.SetStore(i.Target,t):i[`$${n}`]=t},i.Value!=null&&(r[t]=i.Value),r}$ConvertCommandOption(n,t){return t?typeof t=="string"||typeof t=="function"||Array.isArray(t)?{Target:t,FuncAction:!0}:(t.FuncAction??=!0,t):{Target:n,FuncAction:!0}}$AddCommand(n,t,i){r.WithDomName(this.$QueryDomName);r.IsInited||r.Init();let u=i.Target;r.Using(n,({Dom:r})=>{if(typeof u=="function")if(u=this.$GenerateEventFunction(n,u,t),i.FuncArgs){let n=this.ToJoin(i.FuncArgs,",");u+=`(${n})`}else i.FuncAction&&(u+=`()`);else u=this.ToJoin(u);i.TargetHead&&(u=i.TargetHead+u);i.TargetTail&&(u+=i.TargetTail);i.CommandKey&&(t+=`:${i.CommandKey}`);this.$SetAttribute(r,t,u)})}$SetAttribute(n,t,i){if(n==null){let n=`Dom Element is null. ${i}`;console.warn(n);return}n.setAttribute(t,i)}$RandomFuncName(n){return`${n}${this.GenerateIdReplace("")}`.replace(/[-:.]/g,"_")}$GenerateEventFunction(n,t,i){let u=this.$RandomFuncName(`${i}_`);n=this.Paths(n);let r=["event",...n,u];return this.AddV_Function(r,t),this.ToJoin(r)}}class l extends a{$MountId=null;Id;constructor(){super();this.Id=this.GenerateId()}WithMountId(n){return this.$MountId=n,this}Init(){if(this.$IsInited)return this;this.Store=h.reactive(this.Store);let n=this.Store,t=this.$MountedFuncs;this.$VueApp=h.createApp({...this.$VueOption,data(){return n},mounted:()=>{for(let n of t)n()}});for(let n of this.$VueUse)this.$VueApp.use(n);return this.$VueProxy=this.$VueApp.mount(`#${this.$MountId}`),this.$IsInited=!0,this}Using(n=()=>{}){return n(),this}}t.VueModel=l;const i=new l;t.Model=i;window.Model=i});
//# sourceMappingURL=VueModel.umd.min.js.map